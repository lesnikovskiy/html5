<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>File Upload</title>
	<script type="text/javascript">	
	window.addEventListener('load', function() {
		document.querySelector('#fileToUpload').addEventListener('change', function(e) {
			var files = e.target.files;
			var image = files[0];
			
			var xhr = new XMLHttpRequest();
			var fd = new FormData();
			
			xhr.open('POST', '/uploadFile', true);
			xhr.onload = function(e) {
				var response = e.target.responseText;
				if (response) {
					var json = JSON.parse(response);
					if (!json) return;
					
					var msg = 'Uploaded: name: ' + json.name + ' ';
					msg += 'type: ' + json.type + ' ';
					msg += 'size: ' + json.size;
					document.querySelector('#status').appendChild(document.createTextNode(msg));
				}
			};
			fd.append('image', image);
			xhr.send(fd);
		});
	}, true);
	</script>
</head>
<body>
		<label for="image">Image: <input type="file" name="image" id="fileToUpload" /></label>
		<p id="status"></p>
</body>
</html>